<html>
<script src="http://cdn.peerjs.com/0.3/peer.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script type="text/javascript">
	var peer = new Peer('ractor', {key: 'saebr57tmjnstt9'}); 
	var audiopeer = new Peer('ractorAudio', {key: '7uhibn55689tfbt9'}); 
	var conn = peer.connect('student');
	conn.on('open', function(){
  		conn.send('Handshake: Hi, I am ractor ');
	});
	//Data Channel
	peer.on('connection', function(conn) {
  		conn.on('data', function(data){
    	// Receive info from student
    	console.log(data);
  	});
	});
	var image = {
		1:'http://bit.ly/1CJVOsI',
		2:'http://bit.ly/1Cf1drk'
	}
	function sendPage(imageURL){
		conn.send(image[imageURL]);
	};

  
	navigator.getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);

	navigator.getUserMedia(
  			{video: false, audio: true},
 			 function success(localAudioStream) {
    			//call student
    			var outgoing = audiopeer.call("studentAudio", localAudioStream);
    			audiopeer.on('call', function(incoming) {
    				incoming.on('stream', function(stream) {
  						// Do something with this audio stream
  						playStream(stream);
					});
    			});
  			},
  			function error(err) {
    			console.log(err);
  			}
		);

	function playStream(stream) {
 		 var audio = $('<audio autoplay />').appendTo('body');
  			audio[0].src = (URL || webkitURL || mozURL).createObjectURL(stream);
	}
	
</script>
<body>
	<a href="#" onclick="sendPage(1);">Send Page One</a></br>
	<a href="#" onclick="sendPage(2);">Send Page Two</a>
</body>
</html>