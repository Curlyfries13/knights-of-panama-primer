<html>
<script src="http://cdn.peerjs.com/0.3/peer.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script type="text/javascript">
	var peer = new Peer('student', {key: 'saebr57tmjnstt9'});
	var audiopeer = new Peer('studentAudio', {key: '7uhibn55689tfbt9'});  
	var conn = peer.connect('ractor');
	conn.on('open', function(){
  		conn.send('Handshake: Hi, I am student ');
	});

	peer.on('connection', function(conn) {
  		conn.on('data', function(data){
    	console.log(data);
    	if(data){
    		if(data.indexOf("Handshake")>=0){
    			//Show green button on interface , received handshake from ractor
    		}else{
    			$("#page").attr("src", data);
    		}
    	}
  	});
	});

	navigator.getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);

	navigator.getUserMedia(
  			{video: false, audio: true},
 			 function success(localAudioStream) {
    			//call ractor
    			
  			},
  			function error(err) {
    			console.log(err);
  			}
		);

	function playStream(stream) {
 		 var audio = $('<audio autoplay />').appendTo('body');
  			audio[0].src = (URL || webkitURL || mozURL).createObjectURL(stream);
	}
	//in case student calls first
	audiopeer.on('call', function(incoming) {
  			incoming.on('stream', function(stream) {
    			playStream(stream);
  			});
	});
</script>
<body>
	<div style="width:480px; height:800px; background:#CCC; margin:0 auto;">
		<img id="page"/>
	</div>
</body>
</html>